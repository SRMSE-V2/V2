function renderCards(i,t){$(".cards_disco").length>0&&$(".cards_disco").remove(),$.each(i,function(i,e){var n=""
"next"===t&&(n="left:+"+$("body").width()+"px")
var a=$('<li class="cards_disco hide" style="position:relative;'+n+'"><img src=""><span style="color:white;margin-left:2px;display:block;margin-top:5px;" class="title"></span><span style="color: #AFAFAF;margin-left:2px;font-size:10px;display:block;" class="date"></span></li>')
if(a.find("img").attr("src",e.image_link),e.album_name.length>26?(a.attr("data-toggle","tooltip"),a.attr("title",e.album_name),a.find(".title").text(e.album_name.substr(0,23)+"...")):(a.attr("data-toggle","tooltip"),a.attr("title",e.album_name),a.find(".title").text(e.album_name)),a.find(".date").text(e.release_date),"None"!==e.image_link){var o=e.image_link.replace("File:","").replace(/ /g,"_").split("/")
a.find("img").attr("src","http://en.wikipedia.org/wiki/en:Special:Filepath/"+o[o.length-1]+"?width=140"),a.find("img").on("error",function(){a.find("img").attr("src","http://en.wikipedia.org/wiki/en:Special:Filepath/Wikipedia_wordmark.svg?width=140"),a.find("img").off("error")})}else{a.find("img").remove(),a.prepend('<div class="no_image"><span>'+e.album_name[0]+"</span></div>")
var c=parseInt(3*Math.random())
a.find(".no_image").append(),a.find(".no_image").css({width:"115px",height:"115px","background-color":colors[c]})}if(a.on("click",function(){window.location=e.album_link}),$("#image_slider").append(a),$(".cards_disco").removeClass("hide"),"next"===t){$(".cards_disco").length
$(".cards_disco").animate({left:"0px",queue:!1},1e3,function(){})}})}function nextEvent(){if(count%27===0)$.ajax({async:!0,url:window.domain+"/cgi-bin/new2/smart/getMoreDisco.py",data:{query:$("#search").val().trim().toLowerCase(),num:count},dataType:"text",type:"GET"}).done(function(i){var t=JSON.parse(i).discography
0===t.length?($("#next_disc").css("pointer","arrow"),$("#next_disc").off("click"),$("#next_disc").removeClass("nvgt_hover")):($("#next_disc").addClass("nvgt_hover"),window.val=window.val.concat(t),renderCards(window.val.slice(count,count+ulimit),"next"),count+=9)})
else{var i=$(".cards_disco").length,t=0
$(".cards_disco").animate({left:"-"+$("body").width()+"px",position:"absolute",queue:!1},1e3,function(){++t,t===i&&($(".cards_disco").remove(),renderCards(window.val.slice(count,count+ulimit),"next"),count+=9)})}}function reduce(){return $(".disc_back").width()<115*ulimit+14*$("body").width()/100+5*ulimit+30?(ulimit-=1,$(".disc_back").width()<115*ulimit+14*$("body").width()/100+5*ulimit+30?reduce():!0):!1}function grow(){return $(".disc_back").width()+230>115*ulimit+14*$("body").width()/100+5*ulimit+30?(ulimit+=1,$(".disc_back").width()+230>115*ulimit+14*$("body").width()/100+5*ulimit+30?reduce():!0):!1}function onResize(){1===$(".disc_back").length?$("#centre_parent").css("margin-top","82px"):$("#centre_parent").css("margin-top","150px"),$(window).width()<1e3?($(".disc_back").css("top","180px"),$(".padded_body").css("margin-top","100px")):($(".disc_back").css("top","90px"),$(".padded_body").css("margin-top","200px"),$(".side").css("margin-top","200px")),renderCards(reduce()?window.val.slice(count,count+ulimit):grow()?window.val.slice(count,count+ulimit):window.val.slice(0,count+ulimit))}if(0===$(".disc_back").length){var discography=$('<div class="row disc_back"><div class="col-lg-12 full-height"><ul id="image_slider"></ul><span class="nvgt nvgt_hover" id="prev_disc"></span><span class="nvgt nvgt_hover" id="next_disc"></span></div></div>')
$("body").append(discography)
var colors=["#2ecc71","#3498db","#e74c3c","#f1c40f"],ulimit=parseInt(($("body").width()-14*$("body").width()/100)/120)
console.log(ulimit)
var count=ulimit
$("#prev_disc").on("click",function(){$("#next_disc").css("pointer","pointer"),$("#next_disc").on("click",nextEvent),$("#next_disc").removeClass("nvgt_hover"),count!==ulimit&&$(".cards_disco").animate({left:"+"+$("body").width()+"px",position:"absolute",queue:!1},1e3,function(){count>ulimit&&(renderCards(window.val.slice(count-2*ulimit,count-ulimit),"prev"),count-=9)})}),$("#next_disc").on("click",nextEvent)
var wait=!0
onResize(),$(window).resize(onResize)}