var WEATHER=$('<div class="module" id="weather">   <div class="row">  <div  class="col-md-12 weather_city"></div>                        </div>           <div style="margin-bottom:15px;" class="row">                                         <div class="weather_desc col-lg-7 col-md-7 col-sm-7 col-xs-7">                                               </div>                     <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">                        <img width="60" height="60" class="img_today switch"  src="">                         <div style="font-size:18px;" class="weather_max"></div>                     </div>                                       </div>                                                                             <div class="row weather_details">                   <div class="col-lg-12">  <table class="table">                  <tbody>                   <tr>                  <td class="h5">                  Today Sunset&nbsp;                  </td>                  <td class="weather_today_sunset">                  </td>                  </tr>                  <tr>                  <td class="h5">                  Tomorrow Sunrise&nbsp;                  </td>                  <td class="weather_tomorrow_sunrise">                  </td>                  </tr>                  <tr>                  <td class="h5">                  Today Moonrise&nbsp;                  </td>                  <td class="weather_moonrise">                  </td>                  </tr>                  <tr>                  <td class="h5">                  Tomorrow Moonset&nbsp;                  </td>                  <td class="weather_moonset">                  </td>                  </tr>                  </tbody>                  </table>                  <hr>                  </div>                                       <div class="col-lg-12 days_weather">                                            </div>                                          <div class="col-lg-4"></div>                     <div class="col-lg-4"></div>                     <div class="col-lg-12" style="text-align:center;">                     </div>                  </div>                  <div class="row" style="text-align:center;">                     <button data-toggle="tooltip" data-placement="bottom" title="Click to see more statistics" class="btn btn-us glyphicon glyphicon-chevron-down weather_button"></button>                  </div>               </div>')
if(0===$("#weather").length){$("#smart_answer").addClass("hide"),WEATHER.find(".weather_details").hide()
var CYCLE=0
WEATHER.find(".weather_button").click(function(){WEATHER.find(".weather_button").toggleClass("glyphicon-chevron-down glyphicon-chevron-up"),WEATHER.find(".weather_details").slideToggle(function(){0===CYCLE?(WEATHER.find(".weather_button").attr("title","Click to see less statistics"),++CYCLE):(WEATHER.find(".weather_button").attr("title","Click to see more statistics"),CYCLE=0)})})
var imgs=["clear sky","clear","haze","light rain","mainly clearly sky","mainly or generally cloudy sky","cloudy sky","mainly or generally cloudy sky with possibility of rain","mist","moderate rain","moderate snow","partly cloud sky with possibility of rain or thunder","partly cloudy","partly cloudy sky","partly cloudy sky with thundery development","rain or snow","thunderstorm with rain","fog"]
$.each(imgs,function(t,e){window.SA.forecast.indexOf(e)>-1&&(WEATHER.find(".img_today").attr("src","/images/"+window.color+"/"+e+".png"),WEATHER.find(".img_today").css("-webkit-filter"),WEATHER.find(".img_today").css("-moz-filter"))})
var city=window.SA.City,maxx=window.SA.Maximum,minn=window.SA.Minimum,moonrise=window.SA.Moonrise,moonset=window.SA.Moonset,rainfall=window.SA.Rainfall,today_sunset=window.SA.Today_Sunset,tomorow_sunrise=window.SA.Tomorrow_Sunrise,forecast=window.SA.forecast,days=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],today=days.indexOf(window.SA.day),future=window.SA.future
WEATHER.find(".weather_city").text(city.toLowerCase().capitalizeMe()),WEATHER.find(".weather_desc").append("<div>"+window.SA.forecast.capitalizeMe()+"</div>")
var w=[],i=0,row=$("<div></div>")
for(row.addClass("row");3>=i;){++today,today>6&&(today=0)
var d=$("<div></div>")
d.addClass("col-lg-6"),d.css({"font-size":"16px"})
var img=$("<img></img>")
$.each(imgs,function(t,e){future[i].forecast.indexOf(e)>-1&&(img.addClass("switch"),img.attr("src","/images/"+window.color+"/"+e+".png"),img.css("-webkit-filter"))}),img.attr("width","60"),img.attr("height","60"),img.css({display:"block","margin-left":"auto","margin-right":"auto"}),d.append(img)
var s=$('<span style="display:block;text-align:center;">'+days[today]+"</span>")
d.append(s)
var l=$('<span style="display:block;text-align:center;">'+future[i].maximum+"/"+future[i].minimum+"<sup>&deg;C</sup></span>")
if(d.append(l),row.append(d),1==i){WEATHER.find(".days_weather").append(row)
var row=$("<div></div>")
row.addClass("row")}++i}WEATHER.find(".days_weather").append(row),WEATHER.find(".weather_max").html(maxx+"/"+minn+"<sup>&deg;C</sup>"),WEATHER.find(".weather_moonrise").text(moonrise),WEATHER.find(".weather_moonset").text(moonset),WEATHER.find(".weather_today_sunset").text(today_sunset),WEATHER.find(".weather_tomorrow_sunrise").text(tomorow_sunrise),$("head").append("<style>.weather_city{font-size:36px;}.weather_city>span{font-size:18px;}.weather_max{text-align:center;}.weather_desc{font-size:16px;}</style>"),$("#smart_col").html(WEATHER),$("#smart_col").removeClass("hide")}